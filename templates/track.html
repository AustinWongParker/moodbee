<!DOCTYPE html>
<html>
    {% extends "base.html" %}
    {% block title %}Track{% endblock %}
    {% block content %}
<head>
    <!-- ... (other head elements) ... -->
    <style>
        .selected-image-border {
            border: 3px solid red; /* Customize the border color and size as desired */
        }
        .mt-custom {
            margin-top: 6rem; /* Adjust the value to your desired margin (e.g., 6rem, 10rem, etc.) */
        }
        /* Add margins on both sides of the page */
        .page-container {
            margin: 0 100px; /* Adjust the margin values as needed */
        }

    </style>
</head>
<body>
    <div class="page-container">
        <div class="mt-custom">
            <nav class="navbar navbar-expand-sm fixed-top navbar-light mb-3">
                <!-- Your navbar content here -->
            </nav>

            <div class="image-container d-flex justify-content-around">
                <!-- Image 1 with custom URL (using JavaScript to handle redirection) -->
                <a href="#" class="select-image" data-image="mad1.png">
                    <img src="/static/mad1.png" alt="mad" class="img-fluid">
                </a>

                <!-- Image 2 -->
                <a href="#" class="select-image" data-image="upset2.png">
                    <img src="/static/upset2.png" alt="upset" class="img-fluid">
                </a>

                <!-- Image 3 -->
                <a href="#" class="select-image" data-image="neutral3.png">
                    <img src="/static/neutral3.png" alt="neutral" class="img-fluid">
                </a>

                <!-- Image 4 -->
                <a href="#" class="select-image" data-image="happy4.png">
                    <img src="/static/happy4.png" alt="happy" class="img-fluid">
                </a>

                <!-- Image 5 -->
                <a href="#" class="select-image" data-image="great5.png">
                    <img src="/static/great5.png" alt="great" class="img-fluid">
                </a>
            </div>

            <!-- Comment box
            <div class="my-4">
                <form id="form-id-awp" action="{{ url_for('submit') }}" method="POST">
                    <div class="form-group">
                        <label for="selected_image">Selected Image:</label>
                        <input type="text" class="form-control" id="selected-image" name="selected_image">
                    </div>
                    <div class="form-group">
                        <label for="comment">Add a Comment:</label>
                        <textarea class="form-control" id="comment" name="comment" rows="3"></textarea>
                    </div>
                    <button type="button" class="btn btn-primary" onclick="submitForm()">Submit</button>
                </form>
            </div> -->

            <div class="my-4">
            <form id="myForm" action="/submit" method="post">
                <label for="comment">Comment:</label>
                <textarea id="comment" name="comment" rows="4" cols="50"></textarea>
                <br>
                <button type="button" class="btn btn-primary" onclick="submitForm()">Submit for comment</button>
            </form>
        </div>

            <h1>Comments</h1>

            <ul>
                {% for comment in comments %}
                    <li>{{ comment.content }}</li>
                {% endfor %}
            </ul>

        </div>
    </div> 

    <!-- Your scripts and libraries here -->
    <script>
        // JavaScript code to handle image selection and form submission
        let selectedImage = null; // Initialize the variable to store the selected image

        function selectImage(imageLink) {
            // Get all image links and remove the 'selected-image-border' class
            var allImageLinks = document.querySelectorAll('.select-image');
            allImageLinks.forEach(function(link) {
                link.classList.remove('selected-image-border');
            });

            // Get the data-image attribute value
            selectedImage = imageLink.getAttribute('data-image');

            // Update the selected image value in the comment box
            document.getElementById('selected-image').value = selectedImage;

            // Add the 'selected-image-border' class to the clicked image link
            imageLink.classList.add('selected-image-border');
        }

        function submitForm() {
        // Get the form and comment values
        var form = document.getElementById('myForm');
        var comment = document.getElementById('comment').value;
        var emotion = document.getElementById('emotion').value;

        // Use Fetch API to send the form data to the server
        fetch('/submit', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ comment: comment }),
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                console.log('Form submitted successfully');
                console.log('Submitted Comment:', comment);
                // Refresh the comments on success
                fetchComments();
            } else {
                console.error('Form submission failed');
            }
        })
        .catch(error => {
            console.error('Error during form submission:', error);
        });
    }



        document.querySelectorAll('.select-image').forEach(function(imageLink) {
            imageLink.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent the link from navigating
                selectImage(this);
            });
        });

    </script>
</body>
</html>

{% endblock %}